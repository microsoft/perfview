/*!-----------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.5.2(d49899a916fd99840f6f9178f2dd06e0e7013646)
 * Released under the MIT license
 * https://github.com/Microsoft/vscode/blob/master/LICENSE.txt
 *-----------------------------------------------------------*/
(function(){var e=["exports","require","vs/nls","vs/nls!vs/languages/json/common/jsonWorker","vs/base/common/strings","vs/platform/request/common/request","vs/base/common/types","vs/base/common/json","vs/languages/json/common/parser/jsonParser","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/contributions/globPatternContribution","vs/languages/json/common/contributions/globPatternContribution","vs/nls!vs/base/common/http","vs/nls!vs/languages/json/common/contributions/packageJSONContribution","vs/nls!vs/languages/json/common/contributions/projectJSONContribution","vs/nls!vs/languages/json/common/jsonIntellisense","vs/nls!vs/languages/json/common/jsonSchemaService","vs/nls!vs/languages/json/common/parser/jsonParser","vs/base/common/http","vs/platform/workspace/common/workspace","vs/base/common/jsonFormatter","vs/languages/json/common/jsonIntellisense","vs/languages/json/common/parser/jsonLocation","vs/base/common/errors","vs/languages/json/common/contributions/bowerJSONContribution","vs/nls!vs/languages/json/common/contributions/bowerJSONContribution","vs/languages/json/common/contributions/packageJSONContribution","vs/languages/json/common/contributions/projectJSONContribution","vs/languages/json/common/jsonSchemaService","vs/editor/common/services/resourceService","vs/base/common/severity","vs/base/common/uri","vs/base/common/arrays","vs/base/common/lifecycle","vs/languages/json/common/jsonWorker","vs/base/common/objects","vs/editor/common/modes","vs/platform/markers/common/markers","vs/platform/instantiation/common/instantiation","vs/editor/common/modes/supports/suggestSupport","vs/editor/common/worker/validationHelper"],t=function(t){for(var n=[],r=0,o=t.length;r<o;r++)n[r]=e[t[r]];return n};define(e[22],t([1,0]),function(e,t){"use strict";var n=function(){function e(e){this.segments=e}return e.prototype.append=function(t){return new e(this.segments.concat(t))},e.prototype.getSegments=function(){return this.segments},e.prototype.matches=function(e){for(var t=0,n=0;t<e.length&&n<this.segments.length;n++)if(e[t]===this.segments[n]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length},e.prototype.toString=function(){return"["+this.segments.join("][")+"]"},e}();t.JSONLocation=n}),define(e[12],t([2,3]),function(e,t){return e.create("vs/base/common/http",t)}),define(e[18],t([1,0,12]),function(e,t,n){"use strict";function r(e){if(!(e<400))switch(e){case 400:return n.localize(0,null);case 401:return n.localize(1,null);case 403:return n.localize(2,null);case 404:return n.localize(3,null);case 405:return n.localize(4,null);case 406:return n.localize(5,null);case 407:return n.localize(6,null);case 408:return n.localize(7,null);case 409:return n.localize(8,null);case 410:return n.localize(9,null);case 411:return n.localize(10,null);case 412:return n.localize(11,null);case 413:return n.localize(12,null);case 414:return n.localize(13,null);case 415:return n.localize(14,null);case 500:return n.localize(15,null);case 501:return n.localize(16,null);case 503:return n.localize(17,null);default:return n.localize(18,null,e)}}t.getErrorStatusDescription=r}),define(e[20],t([1,0,7]),function(e,t,n){"use strict";function r(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}function o(e,t){for(var n=t.length-1;n>=0;n--)e=r(e,t[n]);return e}function i(e,t,r){function o(){return v+a(g,p+S)}function i(){var e=b.scan();for(y=!1;e===n.SyntaxKind.Trivia||e===n.SyntaxKind.LineBreakTrivia;)y=y||e===n.SyntaxKind.LineBreakTrivia,e=b.scan();return e}function c(t,n,r){e.substring(n,r)!==t&&O.push({offset:n,length:r-n,content:t})}var p,h,f,m;if(t){for(f=t.offset,m=f+t.length;f>0&&!u(e,f-1);)f--;var d=n.createScanner(e,!0);d.setPosition(m),d.scan(),m=d.getPosition(),h=e.substring(f,m),p=s(h,0,r)}else h=e,f=0,m=e.length,p=0;var g,v=l(r,e),y=!1,S=0;g=r.insertSpaces?a(" ",r.tabSize):"\t";var b=n.createScanner(h,!1),O=[],k=i();if(k!==n.SyntaxKind.EOF){var x=b.getTokenOffset()+f,w=a(g,p);c(w,f,x)}for(;k!==n.SyntaxKind.EOF;){for(var j=b.getTokenOffset()+b.getTokenLength()+f,T=i(),P="";!y&&(T===n.SyntaxKind.LineCommentTrivia||T===n.SyntaxKind.BlockCommentTrivia);){var N=b.getTokenOffset()+f;c(" ",j,N),j=b.getTokenOffset()+b.getTokenLength()+f,P=T===n.SyntaxKind.LineCommentTrivia?o():"",T=i()}if(T===n.SyntaxKind.CloseBraceToken)k!==n.SyntaxKind.OpenBraceToken&&(S--,P=o());else if(T===n.SyntaxKind.CloseBracketToken)k!==n.SyntaxKind.OpenBracketToken&&(S--,P=o());else if(T!==n.SyntaxKind.EOF){switch(k){case n.SyntaxKind.OpenBracketToken:case n.SyntaxKind.OpenBraceToken:S++,P=o();break;case n.SyntaxKind.CommaToken:case n.SyntaxKind.LineCommentTrivia:P=o();break;case n.SyntaxKind.BlockCommentTrivia:P=y?o():" ";break;case n.SyntaxKind.ColonToken:P=" ";break;case n.SyntaxKind.NullKeyword:case n.SyntaxKind.TrueKeyword:case n.SyntaxKind.FalseKeyword:case n.SyntaxKind.NumericLiteral:T!==n.SyntaxKind.NullKeyword&&T!==n.SyntaxKind.FalseKeyword&&T!==n.SyntaxKind.NumericLiteral||(P=" ")}!y||T!==n.SyntaxKind.LineCommentTrivia&&T!==n.SyntaxKind.BlockCommentTrivia||(P=o())}var A=b.getTokenOffset()+f;c(P,j,A),k=T}return O}function a(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function s(e,t,n){for(var r=0,o=0,i=n.tabSize||4;r<e.length;){var a=e.charAt(r);if(" "===a)o++;else{if("\t"!==a)break;o+=i}r++}return Math.floor(o/i)}function l(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}function u(e,t){return"\r\n".indexOf(e.charAt(t))!==-1}t.applyEdit=r,t.applyEdits=o,t.format=i}),define(e[25],t([2,3]),function(e,t){return e.create("vs/languages/json/common/contributions/bowerJSONContribution",t)}),define(e[10],t([2,3]),function(e,t){return e.create("vs/languages/json/common/contributions/globPatternContribution",t)}),define(e[11],t([1,0,4,10]),function(e,t,n,r){"use strict";var o=[{type:"value",label:r.localize(0,null),codeSnippet:'"**/*.{{extension}}": true',documentationLabel:r.localize(1,null)},{type:"value",label:r.localize(2,null),codeSnippet:'"**/*.{ext1,ext2,ext3}": true',documentationLabel:r.localize(3,null)},{type:"value",label:r.localize(4,null),codeSnippet:'"**/*.{{source-extension}}": { "when": "$(basename).{{target-extension}}" }',documentationLabel:r.localize(5,null)},{type:"value",label:r.localize(6,null),codeSnippet:'"{{name}}": true',documentationLabel:r.localize(7,null)},{type:"value",label:r.localize(8,null),codeSnippet:'"{folder1,folder2,folder3}": true',documentationLabel:r.localize(9,null)},{type:"value",label:r.localize(10,null),codeSnippet:'"**/{{name}}": true',documentationLabel:r.localize(11,null)}],i=[{type:"value",label:r.localize(12,null),codeSnippet:"true",documentationLabel:r.localize(13,null)},{type:"value",label:r.localize(14,null),codeSnippet:"false",documentationLabel:r.localize(15,null)},{type:"value",label:r.localize(16,null),codeSnippet:'{ "when": "$(basename).{{extension}}" }',documentationLabel:r.localize(17,null)}],a=function(){function e(){}return e.prototype.isSettingsFile=function(e){var t=e.path;return n.endsWith(t,"/settings.json")},e.prototype.collectDefaultSuggestions=function(e,t){return null},e.prototype.collectPropertySuggestions=function(e,t,n,r,i,a){return this.isSettingsFile(e)&&(t.matches(["files.exclude"])||t.matches(["search.exclude"]))&&o.forEach(function(e){return a.add(e)}),null},e.prototype.collectValueSuggestions=function(e,t,n,r){return this.isSettingsFile(e)&&(t.matches(["files.exclude"])||t.matches(["search.exclude"]))&&i.forEach(function(e){return r.add(e)}),null},e.prototype.getInfoContribution=function(e,t){return null},e}();t.GlobPatternContribution=a}),define(e[13],t([2,3]),function(e,t){return e.create("vs/languages/json/common/contributions/packageJSONContribution",t)}),define(e[14],t([2,3]),function(e,t){return e.create("vs/languages/json/common/contributions/projectJSONContribution",t)}),define(e[15],t([2,3]),function(e,t){return e.create("vs/languages/json/common/jsonIntellisense",t)}),define(e[16],t([2,3]),function(e,t){return e.create("vs/languages/json/common/jsonSchemaService",t)}),define(e[17],t([2,3]),function(e,t){return e.create("vs/languages/json/common/parser/jsonParser",t)});var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define(e[8],t([1,0,17,32,6,7,22]),function(e,t,r,o,i,a,s){"use strict";var l=function(){function e(e,t,n,r,o){this.type=t,this.name=n,this.start=r,this.end=o,this.parent=e}return e.prototype.getNodeLocation=function(){var e=this.parent?this.parent.getNodeLocation():new s.JSONLocation([]);return this.name&&(e=e.append(this.name)),e},e.prototype.getChildNodes=function(){return[]},e.prototype.getValue=function(){},e.prototype.contains=function(e,t){return void 0===t&&(t=!1),e>=this.start&&e<this.end||t&&e===this.end},e.prototype.visit=function(e){return e(this)},e.prototype.getNodeFromOffset=function(e){var t=function(n){if(e>=n.start&&e<n.end){for(var r=n.getChildNodes(),o=0;o<r.length&&r[o].start<=e;o++){var i=t(r[o]);if(i)return i}return n}return null};return t(this)},e.prototype.getNodeFromOffsetEndInclusive=function(e){var t=function(n){if(e>=n.start&&e<=n.end){for(var r=n.getChildNodes(),o=0;o<r.length&&r[o].start<=e;o++){var i=t(r[o]);if(i)return i}return n}return null};return t(this)},e.prototype.validate=function(e,t,n,i){var a=this;if(void 0===i&&(i=-1),i===-1||this.contains(i)){if(Array.isArray(e.type)?o.contains(e.type,this.type)===!1&&t.warnings.push({location:{start:this.start,end:this.end},message:e.errorMessage||r.localize(0,null,e.type.join())}):e.type&&this.type!==e.type&&t.warnings.push({location:{start:this.start,end:this.end},message:e.errorMessage||r.localize(1,null,e.type)}),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){a.validate(e,t,n,i)}),e.not){var s=new v,l=[];this.validate(e.not,s,l,i),s.hasErrors()||t.warnings.push({location:{start:this.start,end:this.end},message:r.localize(2,null)}),n&&l.forEach(function(e){e.inverted=!e.inverted,n.push(e)})}var u=function(e,o){var i=[],s=null;return e.forEach(function(e){var t=new v,n=[];if(a.validate(e,t,n),t.hasErrors()||i.push(e),s)if(o||t.hasErrors()||s.validationResult.hasErrors()){var r=t.compare(s.validationResult);r>0?s={schema:e,validationResult:t,matchingSchemas:n}:0===r&&s.matchingSchemas.push.apply(s.matchingSchemas,n)}else s.matchingSchemas.push.apply(s.matchingSchemas,n),s.validationResult.propertiesMatches+=t.propertiesMatches,s.validationResult.propertiesValueMatches+=t.propertiesValueMatches;else s={schema:e,validationResult:t,matchingSchemas:n}}),i.length>1&&o&&t.warnings.push({location:{start:a.start,end:a.start+1},message:r.localize(3,null)}),null!==s&&(t.merge(s.validationResult),t.propertiesMatches+=s.validationResult.propertiesMatches,t.propertiesValueMatches+=s.validationResult.propertiesValueMatches,n&&n.push.apply(n,s.matchingSchemas)),i.length};Array.isArray(e.anyOf)&&u(e.anyOf,!1),Array.isArray(e.oneOf)&&u(e.oneOf,!0),Array.isArray(e["enum"])&&(o.contains(e["enum"],this.getValue())===!1?t.warnings.push({location:{start:this.start,end:this.end},message:r.localize(4,null,JSON.stringify(e["enum"]))}):t.enumValueMatch=!0),null!==n&&n.push({node:this,schema:e})}},e}();t.ASTNode=l;var u=function(e){function t(t,n,r,o){e.call(this,t,"null",n,r,o)}return n(t,e),t.prototype.getValue=function(){return null},t}(l);t.NullASTNode=u;var c=function(e){function t(t,n,r,o,i){e.call(this,t,"boolean",n,o,i),this.value=r}return n(t,e),t.prototype.getValue=function(){return this.value},t}(l);t.BooleanASTNode=c;var p=function(e){function t(t,n,r,o){e.call(this,t,"array",n,r,o),this.items=[]}return n(t,e),t.prototype.getChildNodes=function(){return this.items},t.prototype.getValue=function(){return this.items.map(function(e){return e.getValue()})},t.prototype.addItem=function(e){return!!e&&(this.items.push(e),!0)},t.prototype.visit=function(e){for(var t=e(this),n=0;n<this.items.length&&t;n++)t=this.items[n].visit(e);return t},t.prototype.validate=function(t,n,o,i){var a=this;if(void 0===i&&(i=-1),i===-1||this.contains(i)){if(e.prototype.validate.call(this,t,n,o,i),Array.isArray(t.items)){var s=t.items;s.forEach(function(e,t){var r=new v,l=a.items[t];l?(l.validate(e,r,o,i),n.mergePropertyMatch(r)):a.items.length>=s.length&&n.propertiesValueMatches++}),t.additionalItems===!1&&this.items.length>s.length?n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(5,null,s.length)}):this.items.length>=s.length&&(n.propertiesValueMatches+=this.items.length-s.length)}else t.items&&this.items.forEach(function(e){var r=new v;e.validate(t.items,r,o,i),n.mergePropertyMatch(r)});if(t.minItems&&this.items.length<t.minItems&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(6,null,t.minItems)}),t.maxItems&&this.items.length>t.maxItems&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(7,null,t.minItems)}),t.uniqueItems===!0){var l=this.items.map(function(e){return e.getValue()}),u=l.some(function(e,t){return t!==l.lastIndexOf(e)});u&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(8,null)})}}},t}(l);t.ArrayASTNode=p;var h=function(e){function t(t,n,r,o){e.call(this,t,"number",n,r,o),this.isInteger=!0,this.value=Number.NaN}return n(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,n,a,s){if(void 0===s&&(s=-1),s===-1||this.contains(s)){var l=!1;("integer"===t.type||Array.isArray(t.type)&&o.contains(t.type,"integer"))&&(l=!0),l&&this.isInteger===!0&&(this.type="integer"),e.prototype.validate.call(this,t,n,a,s),this.type="number";var u=this.getValue();i.isNumber(t.multipleOf)&&u%t.multipleOf!==0&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(9,null,t.multipleOf)}),i.isUndefined(t.minimum)||(t.exclusiveMinimum&&u<=t.minimum&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(10,null,t.minimum)}),!t.exclusiveMinimum&&u<t.minimum&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(11,null,t.minimum)})),i.isUndefined(t.maximum)||(t.exclusiveMaximum&&u>=t.maximum&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(12,null,t.maximum)}),!t.exclusiveMaximum&&u>t.maximum&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(13,null,t.maximum)}))}},t}(l);t.NumberASTNode=h;var f=function(e){function t(t,n,r,o,i){e.call(this,t,"string",n,o,i),this.isKey=r,this.value=""}return n(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,n,o,i){if(void 0===i&&(i=-1),(i===-1||this.contains(i))&&(e.prototype.validate.call(this,t,n,o,i),t.minLength&&this.value.length<t.minLength&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(14,null,t.minLength)}),t.maxLength&&this.value.length>t.maxLength&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(15,null,t.maxLength)}),t.pattern)){var a=new RegExp(t.pattern);a.test(this.value)||n.warnings.push({location:{start:this.start,end:this.end},message:t.errorMessage||r.localize(16,null,t.pattern)})}},t}(l);t.StringASTNode=f;var m=function(e){function t(t,n){e.call(this,t,"property",null,n.start),this.key=n,n.parent=this,n.name=n.value,this.colonOffset=-1}return n(t,e),t.prototype.getChildNodes=function(){return this.value?[this.key,this.value]:[this.key]},t.prototype.setValue=function(e){return this.value=e,null!==e},t.prototype.visit=function(e){return e(this)&&this.key.visit(e)&&this.value&&this.value.visit(e)},t.prototype.validate=function(e,t,n,r){void 0===r&&(r=-1),(r===-1||this.contains(r))&&this.value&&this.value.validate(e,t,n,r)},t}(l);t.PropertyASTNode=m;var d=function(e){function t(t,n,r,o){e.call(this,t,"object",n,r,o),this.properties=[]}return n(t,e),t.prototype.getChildNodes=function(){return this.properties},t.prototype.addProperty=function(e){return!!e&&(this.properties.push(e),!0)},t.prototype.getFirstProperty=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].key.value===e)return this.properties[t];return null},t.prototype.getKeyList=function(){return this.properties.map(function(e){return e.key.getValue()})},t.prototype.getValue=function(){var e={};return this.properties.forEach(function(t){var n=t.value&&t.value.getValue();n&&(e[t.key.getValue()]=n)}),e},t.prototype.visit=function(e){for(var t=e(this),n=0;n<this.properties.length&&t;n++)t=this.properties[n].visit(e);return t},t.prototype.validate=function(t,n,o,a){var s=this;if(void 0===a&&(a=-1),a===-1||this.contains(a)){e.prototype.validate.call(this,t,n,o,a);var l={},u=[];this.properties.forEach(function(e){var t=e.key.value;l[t]=e.value,u.push(t)}),Array.isArray(t.required)&&t.required.forEach(function(e){if(!l[e]){var t=s.parent&&s.parent&&s.parent.key,o=t?{start:t.start,end:t.end}:{start:s.start,end:s.start+1};n.warnings.push({location:o,message:r.localize(17,null,e)})}});var c=function(e){for(var t=u.indexOf(e);t>=0;)u.splice(t,1),t=u.indexOf(e)};t.properties&&Object.keys(t.properties).forEach(function(e){c(e);var r=t.properties[e],i=l[e];if(i){var s=new v;i.validate(r,s,o,a),n.mergePropertyMatch(s)}}),t.patternProperties&&Object.keys(t.patternProperties).forEach(function(e){var r=new RegExp(e);u.slice(0).forEach(function(i){if(r.test(i)){c(i);var s=l[i];if(s){var u=new v;s.validate(t.patternProperties[e],u,o,a),n.mergePropertyMatch(u)}}})}),i.isObject(t.additionalProperties)?u.forEach(function(e){var r=l[e];if(r){var i=new v;r.validate(t.additionalProperties,i,o,a),n.mergePropertyMatch(i)}}):t.additionalProperties===!1&&u.length>0&&u.forEach(function(e){var t=l[e];if(t){var o=t.parent;n.warnings.push({location:{start:o.key.start,end:o.key.end},message:r.localize(18,null,e)})}}),t.maxProperties&&this.properties.length>t.maxProperties&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(19,null,t.maxProperties)}),t.minProperties&&this.properties.length<t.minProperties&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize(20,null,t.minProperties)}),i.isObject(t.dependencies)&&Object.keys(t.dependencies).forEach(function(e){var u=l[e];if(u)if(Array.isArray(t.dependencies[e])){var c=t.dependencies[e];c.forEach(function(t){l[t]?n.propertiesValueMatches++:n.warnings.push({location:{start:s.start,end:s.end},message:r.localize(21,null,t,e)})})}else if(i.isObject(t.dependencies[e])){var p=t.dependencies[e],h=new v;s.validate(p,h,o,a),n.mergePropertyMatch(h)}})}},t}(l);t.ObjectASTNode=d;var g=function(){function e(){this.ignoreDanglingComma=!1}return e}();t.JSONDocumentConfig=g;var v=function(){function e(){this.errors=[],this.warnings=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.enumValueMatch=!1}return e.prototype.hasErrors=function(){return!!this.errors.length||!!this.warnings.length},e.prototype.mergeAll=function(e){var t=this;e.forEach(function(e){t.merge(e)})},e.prototype.merge=function(e){this.errors=this.errors.concat(e.errors),this.warnings=this.warnings.concat(e.warnings)},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasErrors()&&e.propertiesMatches)&&this.propertiesValueMatches++},e.prototype.compare=function(e){var t=this.hasErrors();return t!==e.hasErrors()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();t.ValidationResult=v;var y=function(){function e(e){this.config=e,this.validationResult=new v}return Object.defineProperty(e.prototype,"errors",{get:function(){return this.validationResult.errors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warnings",{get:function(){return this.validationResult.warnings},enumerable:!0,configurable:!0}),e.prototype.getNodeFromOffset=function(e){return this.root&&this.root.getNodeFromOffset(e)},e.prototype.getNodeFromOffsetEndInclusive=function(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)},e.prototype.visit=function(e){this.root&&this.root.visit(e)},e.prototype.validate=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=-1),this.root&&this.root.validate(e,this.validationResult,t,n)},e}();t.JSONDocument=y;var S=function(){function e(){}return e.prototype.parse=function(e,t){function n(e){return j.getToken()===e&&(j.scan(),!0)}function o(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),0===w.errors.length||w.errors[0].location.start!==j.getTokenOffset()){var o={message:e,location:{start:j.getTokenOffset(),end:j.getTokenOffset()+j.getTokenLength()}};w.errors.push(o)}if(t&&s(t,!1),n.length+r.length>0)for(var i=j.getToken();i!==a.SyntaxKind.EOF;){if(n.indexOf(i)!==-1){j.scan();break}if(r.indexOf(i)!==-1)break;i=j.scan()}return t}function i(){switch(j.getTokenError()){case a.ScanError.InvalidUnicode:return o(r.localize(22,null)),!0;case a.ScanError.InvalidEscapeCharacter:return o(r.localize(23,null)),!0;case a.ScanError.UnexpectedEndOfNumber:return o(r.localize(24,null)),!0;case a.ScanError.UnexpectedEndOfComment:return o(r.localize(25,null)),!0;case a.ScanError.UnexpectedEndOfString:return o(r.localize(26,null)),!0}return!1}function s(e,t){return e.end=j.getTokenOffset()+j.getTokenLength(),t&&j.scan(),e}function l(e,t){if(j.getToken()!==a.SyntaxKind.OpenBracketToken)return null;var i=new p(e,t,j.getTokenOffset());j.scan();var l=0;if(i.addItem(x(i,""+l++)))for(;n(a.SyntaxKind.CommaToken);)i.addItem(x(i,""+l++))||w.config.ignoreDanglingComma||o(r.localize(27,null));return j.getToken()!==a.SyntaxKind.CloseBracketToken?o(r.localize(28,null),i):s(i,!0)}function v(e,t){var n=b(null,null,!0);if(!n){if(j.getToken()===a.SyntaxKind.Unknown){var i=j.getTokenValue();i.match(/^['\w]/)&&o(r.localize(29,null))}return null}var s=new m(e,n);return t[n.value]&&w.warnings.push({location:{start:s.key.start,end:s.key.end},message:r.localize(30,null)}),t[n.value]=!0,j.getToken()!==a.SyntaxKind.ColonToken?o(r.localize(31,null),s,[],[a.SyntaxKind.CloseBraceToken,a.SyntaxKind.CommaToken]):(s.colonOffset=j.getTokenOffset(),j.scan(),s.setValue(x(s,n.value))?(s.end=s.value.end,s):o(r.localize(32,null),s,[],[a.SyntaxKind.CloseBraceToken,a.SyntaxKind.CommaToken]))}function S(e,t){if(j.getToken()!==a.SyntaxKind.OpenBraceToken)return null;var i=new d(e,t,j.getTokenOffset());j.scan();var l={};if(i.addProperty(v(i,l)))for(;n(a.SyntaxKind.CommaToken);)i.addProperty(v(i,l))||w.config.ignoreDanglingComma||o(r.localize(33,null));return j.getToken()!==a.SyntaxKind.CloseBraceToken?o(r.localize(34,null),i):s(i,!0)}function b(e,t,n){if(j.getToken()!==a.SyntaxKind.StringLiteral)return null;var r=new f(e,t,n,j.getTokenOffset());return r.value=j.getTokenValue(),i(),s(r,!0)}function O(e,t){if(j.getToken()!==a.SyntaxKind.NumericLiteral)return null;var n=new h(e,t,j.getTokenOffset());if(!i()){var l=j.getTokenValue();try{var u=JSON.parse(l);if("number"!=typeof u)return o(r.localize(35,null),n);n.value=u}catch(c){return o(r.localize(36,null),n)}n.isInteger=l.indexOf(".")===-1}return s(n,!0)}function k(e,t){var n;switch(j.getToken()){case a.SyntaxKind.NullKeyword:n=new u(e,t,j.getTokenOffset());break;case a.SyntaxKind.TrueKeyword:n=new c(e,t,(!0),j.getTokenOffset());break;case a.SyntaxKind.FalseKeyword:n=new c(e,t,(!1),j.getTokenOffset());break;default:return null}return s(n,!0)}function x(e,t){return l(e,t)||S(e,t)||b(e,t,!1)||O(e,t)||k(e,t)}void 0===t&&(t=new g);var w=new y(t),j=a.createScanner(e,!0);return j.scan(),w.root=x(null,null),w.root?j.getToken()!==a.SyntaxKind.EOF&&o(r.localize(38,null)):o(r.localize(37,null)),w},e}();t.JSONParser=S}),define(e[21],t([1,0,8,6,9,15,23]),function(e,t,n,r,o,i,a){"use strict";var s=function(){function e(e,t,n){this.schemaService=e,this.requestService=t,this.contributions=n}return e.prototype.doSuggest=function(e,t,r){var i=this,s=t.getWordUntilPosition(r).word,l=new n.JSONParser,u=new n.JSONDocumentConfig;u.ignoreDanglingComma=!0;var c=l.parse(t.getValue(),u),p={currentWord:s,incomplete:!1,suggestions:[]},h=void 0,f=void 0,m={},d={add:function(e){m[e.label]||(m[e.label]=!0,e.overwriteBefore=h,e.overwriteAfter=f,p.suggestions.push(e))},setAsIncomplete:function(){p.incomplete=!0},error:function(e){a.onUnexpectedError(e)}};return this.schemaService.getSchemaForResource(e.toString(),c).then(function(n){var a=[],l=t.getOffsetFromPosition(r),u=c.getNodeFromOffsetEndInclusive(l),g=!0,v=s,y=null;if(u&&"string"===u.type){var S=u;if(S.isKey){var b=t.getRangeFromOffsetAndLength(u.start,u.end-u.start);h=r.column-b.startColumn,f=b.endColumn-r.column,g=!(u.parent&&u.parent.value),y=u.parent?u.parent:null,v=t.getValueInRange({startColumn:b.startColumn+1,startLineNumber:b.startLineNumber,endColumn:r.column,endLineNumber:r.lineNumber}),u.parent&&(u=u.parent.parent)}}if(u&&"object"===u.type){if(u.start===l)return p;var O=u.properties;if(O.forEach(function(e){y&&y===e||(m[e.key.value]=!0)}),n){var k=0===O.length||l>=O[O.length-1].start;i.getPropertySuggestions(e,n,c,u,v,g,k,d)}else u.parent&&i.getSchemaLessPropertySuggestions(c,u,d);var x=u.getNodeLocation();i.contributions.forEach(function(t){var n=t.collectPropertySuggestions(e,x,s,g,k,d);n&&a.push(n)})}if(u&&("string"===u.type||"number"===u.type||"integer"===u.type||"boolean"===u.type||"null"===u.type)){var b=t.getRangeFromOffsetAndLength(u.start,u.end-u.start);h=r.column-b.startColumn,f=b.endColumn-r.column,u=u.parent}if(n?i.getValueSuggestions(e,n,c,u,l,d):i.getSchemaLessValueSuggestions(c,u,l,t,d),u){if("property"===u.type&&l>u.colonOffset){var w=u.key.value,j=u.value;if(!j||l<=j.end){var x=u.parent.getNodeLocation();i.contributions.forEach(function(t){var n=t.collectValueSuggestions(e,x,w,d);n&&a.push(n)})}}}else i.contributions.forEach(function(t){var n=t.collectDefaultSuggestions(e,d);n&&a.push(n)});return o.Promise.join(a).then(function(){return p})})},e.prototype.getPropertySuggestions=function(e,t,n,r,o,i,a,s){var l=this,u=[];n.validate(t.schema,u,r.start),u.forEach(function(e){if(e.node===r&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach(function(e){var n=t[e];s.add({type:"property",label:e,codeSnippet:l.getTextForProperty(e,n,i,a),documentationLabel:n.description||""})})}})},e.prototype.getSchemaLessPropertySuggestions=function(e,t,n){var r=this,o=function(e){e.properties.forEach(function(e){var t=e.key.value;n.add({type:"property",label:t,codeSnippet:r.getTextForSimilarProperty(t,e.value),documentationLabel:""})})};if("property"===t.parent.type){var i=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===i&&e.value&&"object"===e.value.type&&o(e.value),!0})}else"array"===t.parent.type&&t.parent.items.forEach(function(e){"object"===e.type&&e!==t&&o(e)})},e.prototype.getSchemaLessValueSuggestions=function(e,t,n,r,o){var i=this,a=function(e){var t=i.getTextForMatchingNode(e,r);o.add({type:i.getSuggestionType(e.type),label:t,codeSnippet:t,documentationLabel:""}),"boolean"===e.type&&i.addBooleanSuggestion(!e.getValue(),o)};if(t){if("property"===t.type&&n>t.colonOffset){var s=t.value;if(s&&n>s.end)return;var l=t.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===l&&e.value&&a(e.value),!0})}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var l=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===l&&e.value&&"array"===e.value.type&&e.value.items.forEach(function(e){a(e)}),!0})}else t.items.forEach(function(e){a(e)})}else o.add({type:this.getSuggestionType("object"),label:"Empty object",codeSnippet:"{\n\t{{}}\n}",documentationLabel:""}),o.add({type:this.getSuggestionType("array"),label:"Empty array",codeSnippet:"[\n\t{{}}\n]",documentationLabel:""})},e.prototype.getValueSuggestions=function(e,t,n,r,o,i){var a=this;if(r){var s=null;if(r&&"property"===r.type&&o>r.colonOffset){var l=r.value;if(l&&o>l.end)return;s=r.key.value,r=r.parent}if(r&&(null!==s||"array"===r.type)){var u=[];n.validate(t.schema,u,r.start),u.forEach(function(e){if(e.node===r&&!e.inverted&&e.schema&&(e.schema.items&&(a.addDefaultSuggestion(e.schema.items,i),a.addEnumSuggestion(e.schema.items,i)),e.schema.properties)){var t=e.schema.properties[s];t&&(a.addDefaultSuggestion(t,i),a.addEnumSuggestion(t,i))}})}}else this.addDefaultSuggestion(t.schema,i)},e.prototype.addBooleanSuggestion=function(e,t){t.add({type:this.getSuggestionType("boolean"),label:e?"true":"false",codeSnippet:this.getTextForEnumValue(e),documentationLabel:""})},e.prototype.addEnumSuggestion=function(e,t){var n=this;Array.isArray(e["enum"])?e["enum"].forEach(function(r){return t.add({type:n.getSuggestionType(e.type),label:n.getLabelForValue(r),codeSnippet:n.getTextForEnumValue(r),documentationLabel:""})}):"boolean"===e.type&&(this.addBooleanSuggestion(!0,t),this.addBooleanSuggestion(!1,t)),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return n.addEnumSuggestion(e,t)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return n.addEnumSuggestion(e,t)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return n.addEnumSuggestion(e,t)})},e.prototype.addDefaultSuggestion=function(e,t){var n=this;e["default"]&&t.add({type:this.getSuggestionType(e.type),label:this.getLabelForValue(e["default"]),codeSnippet:this.getTextForValue(e["default"]),typeLabel:i.localize(0,null)}),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach(function(e){t.add({type:"snippet",label:n.getLabelForSnippetValue(e.body),codeSnippet:n.getTextForSnippetValue(e.body)})}),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return n.addDefaultSuggestion(e,t)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return n.addDefaultSuggestion(e,t)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return n.addDefaultSuggestion(e,t)})},e.prototype.getLabelForValue=function(e){var t=JSON.stringify(e);return t=t.replace("{{","").replace("}}",""),t.length>57?t.substr(0,57).trim()+"...":t},e.prototype.getLabelForSnippetValue=function(e){var t=JSON.stringify(e);return t=t.replace(/\{\{|\}\}/g,""),t.length>57?t.substr(0,57).trim()+"...":t},e.prototype.getTextForValue=function(e){var t=JSON.stringify(e,null,"\t");return t=t.replace(/[\\\{\}]/g,"\\$&")},e.prototype.getTextForSnippetValue=function(e){return JSON.stringify(e,null,"\t")},e.prototype.getTextForEnumValue=function(e){var t=JSON.stringify(e,null,"\t");switch(typeof e){case"object":return null===e?"{{null}}":t;case"string":return'"{{'+t.substr(1,t.length-2)+'}}"';case"number":case"integer":case"boolean":return"{{"+t+"}}"}return t},e.prototype.getSuggestionType=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:null}if(!e)return"text";switch(e){case"string":return"text";case"object":return"module";case"property":return"property";default:return"value"}},e.prototype.getTextForMatchingNode=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:var n=t.getValueInRange(t.getRangeFromOffsetAndLength(e.start,e.end-e.start));return n}},e.prototype.getTextForProperty=function(e,t,n,o){var i=this.getTextForValue(e);if(!n)return i;i+=": ";var a=t["default"];if(r.isUndefined(a))if(t["enum"]&&t["enum"].length>0)i+=this.getTextForEnumValue(t["enum"][0]);else switch(t.type){case"boolean":i+="{{false}}";break;case"string":i+='"{{}}"';break;case"object":i+="{\n\t{{}}\n}";break;case"array":i+="[\n\t{{}}\n]";break;case"number":case"integer":i+="{{0}}";break;case"null":i+="{{null}}";break;default:return i}else i+=this.getTextForEnumValue(a);return o||(i+=","),i},e.prototype.getTextForSimilarProperty=function(e,t){return this.getTextForValue(e)},e}();t.JSONIntellisense=s});var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);
return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define(e[24],t([1,0,4,25,5]),function(e,t,n,i,a){"use strict";var s=function(){function e(e){this.topRanked=["twitter","bootstrap","angular-1.1.6","angular-latest","angulerjs","d3","myjquery","jq","abcdef1234567890","jQuery","jquery-1.11.1","jquery","sushi-vanilla-x-data","font-awsome","Font-Awesome","font-awesome","fontawesome","html5-boilerplate","impress.js","homebrew","backbone","moment1","momentjs","moment","linux","animate.css","animate-css","reveal.js","jquery-file-upload","blueimp-file-upload","threejs","express","chosen","normalize-css","normalize.css","semantic","semantic-ui","Semantic-UI","modernizr","underscore","underscore1","material-design-icons","ionic","chartjs","Chart.js","nnnick-chartjs","select2-ng","select2-dist","phantom","skrollr","scrollr","less.js","leancss","parser-lib","hui","bootstrap-languages","async","gulp","jquery-pjax","coffeescript","hammer.js","ace","leaflet","jquery-mobile","sweetalert","typeahead.js","soup","typehead.js","sails","codeigniter2"],this.requestService=e}return e.prototype.isBowerFile=function(e){var t=e.path;return n.endsWith(t,"/bower.json")||n.endsWith(t,"/.bower.json")},e.prototype.collectDefaultSuggestions=function(e,t){if(this.isBowerFile(e)){var n={name:"{{name}}",description:"{{description}}",authors:["{{author}}"],version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}};t.add({type:"snippet",label:i.localize(0,null),codeSnippet:JSON.stringify(n,null,"\t"),documentationLabel:""})}return null},e.prototype.collectPropertySuggestions=function(e,t,n,r,o,a){if(this.isBowerFile(e)&&(t.matches(["dependencies"])||t.matches(["devDependencies"]))){if(n.length>0){var s="https://bower.herokuapp.com/packages/search/"+encodeURIComponent(n);return this.requestService.makeRequest({url:s}).then(function(e){if(200!==e.status)return a.error(i.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(Array.isArray(t)){for(var n=t,s=0;s<n.length;s++){var l=n[s].name,u=n[s].description||"",c=JSON.stringify(l);r&&(c+=': "{{*}}"',o||(c+=",")),a.add({type:"property",label:l,codeSnippet:c,documentationLabel:u})}a.setAsIncomplete()}}catch(p){}},function(e){return a.error(i.localize(2,null,e.responseText)),0})}this.topRanked.forEach(function(e){var t=JSON.stringify(e);r&&(t+=': "{{*}}"',o||(t+=",")),a.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})}),a.setAsIncomplete()}return null},e.prototype.collectValueSuggestions=function(e,t,n,r){return null},e.prototype.getInfoContribution=function(e,t){if(this.isBowerFile(e)&&(t.matches(["dependencies","*"])||t.matches(["devDependencies","*"]))){var r=t.getSegments()[t.getSegments().length-1],o=[];o.push(i.localize(3,null,r));var a="https://bower.herokuapp.com/packages/"+encodeURIComponent(r);return this.requestService.makeRequest({url:a}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.url){var r=t.url;n.startsWith(r,"git://")&&(r=r.substring(6)),n.endsWith(r,".git")&&(r=r.substring(0,r.length-4)),o.push(r)}}catch(i){}return o},function(e){return o})}return null},e=r([o(0,a.IRequestService)],e)}();t.BowerJSONContribution=s}),define(e[26],t([1,0,4,13,5]),function(e,t,n,i,a){"use strict";var s=40,l=function(){function e(e){this.mostDependedOn=["lodash","async","underscore","request","commander","express","debug","chalk","colors","q","coffee-script","mkdirp","optimist","through2","yeoman-generator","moment","bluebird","glob","gulp-util","minimist","cheerio","jade","redis","node-uuid","socket","io","uglify-js","winston","through","fs-extra","handlebars","body-parser","rimraf","mime","semver","mongodb","jquery","grunt","connect","yosay","underscore","string","xml2js","ejs","mongoose","marked","extend","mocha","superagent","js-yaml","xtend","shelljs","gulp","yargs","browserify","minimatch","react","less","prompt","inquirer","ws","event-stream","inherits","mysql","esprima","jsdom","stylus","when","readable-stream","aws-sdk","concat-stream","chai","promise","wrench"],this.requestService=e}return e.prototype.isPackageJSONFile=function(e){var t=e.path;return n.endsWith(t,"/package.json")},e.prototype.collectDefaultSuggestions=function(e,t){if(this.isPackageJSONFile(e)){var n={name:"{{name}}",description:"{{description}}",author:"{{author}}",version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}};t.add({type:"module",label:i.localize(0,null),codeSnippet:JSON.stringify(n,null,"\t"),documentationLabel:""})}return null},e.prototype.collectPropertySuggestions=function(e,t,n,r,o,a){if(this.isPackageJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["devDependencies"])||t.matches(["optionalDependencies"])||t.matches(["peerDependencies"]))){var l;if(n.length>0)return l="https://skimdb.npmjs.com/registry/_design/app/_view/browseAll?group_level=1&limit="+s+"&start_key=%5B%22"+encodeURIComponent(n)+"%22%5D&end_key=%5B%22"+encodeURIComponent(n+"z")+"%22,%7B%7D%5D",this.requestService.makeRequest({url:l}).then(function(e){if(200!==e.status)return a.error(i.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(t&&Array.isArray(t.rows)){for(var n=t.rows,l=0;l<n.length;l++){var u=n[l].key;if(Array.isArray(u)&&u.length>0){var c=u[0],p=JSON.stringify(c);r&&(p+=': "{{*}}"',o||(p+=",")),a.add({type:"property",label:c,codeSnippet:p,documentationLabel:""})}}n.length===s&&a.setAsIncomplete()}}catch(h){}},function(e){return a.error(i.localize(2,null,e.responseText)),0});this.mostDependedOn.forEach(function(e){var t=JSON.stringify(e);r&&(t+=': "{{*}}"',o||(t+=",")),a.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})}),a.setAsIncomplete()}return null},e.prototype.collectValueSuggestions=function(e,t,n,r){if(this.isPackageJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["devDependencies"])||t.matches(["optionalDependencies"])||t.matches(["peerDependencies"]))){var o="http://registry.npmjs.org/"+encodeURIComponent(n)+"/latest";return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.version){var n=t.version,o=JSON.stringify(n);r.add({type:"class",label:o,codeSnippet:o,documentationLabel:i.localize(3,null)}),o=JSON.stringify("^"+n),r.add({type:"class",label:o,codeSnippet:o,documentationLabel:i.localize(4,null)}),o=JSON.stringify("~"+n),r.add({type:"class",label:o,codeSnippet:o,documentationLabel:i.localize(5,null)})}}catch(a){}return 0},function(e){return 0})}return null},e.prototype.getInfoContribution=function(e,t){if(this.isPackageJSONFile(e)&&(t.matches(["dependencies","*"])||t.matches(["devDependencies","*"])||t.matches(["optionalDependencies","*"])||t.matches(["peerDependencies","*"]))){var n=t.getSegments()[t.getSegments().length-1],r=[];r.push(i.localize(6,null,n));var o="http://registry.npmjs.org/"+encodeURIComponent(n)+"/latest";return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);t&&(t.description&&r.push(t.description),t.version&&r.push(i.localize(7,null,t.version)))}catch(n){}return r},function(e){return r})}return null},e=r([o(0,a.IRequestService)],e)}();t.PackageJSONContribution=l}),define(e[27],t([1,0,4,14,5]),function(e,t,n,i,a){"use strict";var s=40,l=function(){function e(e){this.requestService=e}return e.prototype.isProjectJSONFile=function(e){var t=e.path;return n.endsWith(t,"/project.json")},e.prototype.collectDefaultSuggestions=function(e,t){if(this.isProjectJSONFile(e)){var n={version:"{{1.0.0-*}}",dependencies:{},frameworks:{dnx451:{},dnxcore50:{}}};t.add({type:"snippet",label:i.localize(0,null),codeSnippet:JSON.stringify(n,null,"\t"),documentationLabel:""})}return null},e.prototype.collectPropertySuggestions=function(e,t,n,r,o,a){if(this.isProjectJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["frameworks","*","dependencies"])||t.matches(["frameworks","*","frameworkAssemblies"]))){var l;return l=n.length>0?"https://www.nuget.org/api/v2/Packages?$filter=Id%20ge%20'"+encodeURIComponent(n)+"'%20and%20Id%20lt%20'"+encodeURIComponent(n+"z")+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Id,Version,Description&$format=json&$top="+s:"https://www.nuget.org/api/v2/Packages?$filter=IsAbsoluteLatestVersion%20eq%20true&$orderby=DownloadCount%20desc&$top="+s+"&$select=Id,Version,DownloadCount,Description&$format=json",this.requestService.makeRequest({url:l}).then(function(e){if(200!==e.status)return a.error(i.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d)){for(var n=t.d,l=0;l<n.length;l++){var u=n[l],c=u.Id,p=u.Version;if(c){var h=u.Description,f=u.Version,m=JSON.stringify(c);r&&(m+=': "{{'+p+'}}"',o||(m+=",")),a.add({type:"property",label:c,codeSnippet:m,typeLabel:f,documentationLabel:h})}}n.length===s&&a.setAsIncomplete()}}catch(d){}},function(e){return a.error(i.localize(2,null,e.responseText)),0})}return null},e.prototype.collectValueSuggestions=function(e,t,n,r){if(this.isProjectJSONFile(e)&&(t.matches(["dependencies"])||t.matches(["frameworks","*","dependencies"])||t.matches(["frameworks","*","frameworkAssemblies"]))){var o="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(n)+"'&$select=Version,IsAbsoluteLatestVersion&$format=json&$top="+s;return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d)){for(var n=t.d,o=0;o<n.length;o++){var a=n[o],l=a.Version;if(l){var u=JSON.stringify(l),c="true"===a.IsAbsoluteLatestVersion,p=u,h="";c&&(h=i.localize(3,null)),r.add({type:"class",label:p,codeSnippet:u,documentationLabel:h})}}n.length===s&&r.setAsIncomplete()}}catch(f){}return 0},function(e){return 0})}return null},e.prototype.getInfoContribution=function(e,t){if(this.isProjectJSONFile(e)&&(t.matches(["dependencies","*"])||t.matches(["frameworks","*","dependencies","*"])||t.matches(["frameworks","*","frameworkAssemblies","*"]))){var n=t.getSegments()[t.getSegments().length-1],r=[];r.push(i.localize(4,null,n));var o="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(n)+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Version,Description&$format=json&$top=5";return this.requestService.makeRequest({url:o}).then(function(e){var t=e.responseText;if(t)try{var n=JSON.parse(t);if(n.d&&n.d[0]){var o=n.d[0];o.Description&&r.push(o.Description),o.Version&&r.push(i.localize(5,null,o.Version))}}catch(a){}return r},function(e){return r})}return null},e=r([o(0,a.IRequestService)],e)}();t.ProjectJSONContribution=l}),define(e[28],t([1,0,16,35,7,18,4,31,6,9,29,5,19,33]),function(e,t,n,i,a,s,l,u,c,p,h,f,m,d){"use strict";function g(e){try{var t=u["default"].parse(e);if("file"===t.scheme)return t.fsPath}catch(n){}return e}var v=function(){function e(e){this.combinedSchemaId="local://combinedSchema/"+encodeURIComponent(e);try{this.patternRegExp=new RegExp(l.convertSimple2RegExpPattern(e)+"$")}catch(t){this.patternRegExp=null}this.schemas=[],this.combinedSchema=null}return e.prototype.addSchema=function(e){this.schemas.push(e),this.combinedSchema=null},e.prototype.matchesPattern=function(e){return this.patternRegExp&&this.patternRegExp.test(e)},e.prototype.getCombinedSchema=function(e){return this.combinedSchema||(this.combinedSchema=e.createCombinedSchema(this.combinedSchemaId,this.schemas)),this.combinedSchema},e}(),y=function(){function e(e,t,n){this.service=e,this.url=t,n&&(this.unresolvedSchema=p.TPromise.as(new S(n)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(function(t){return e.service.resolveSchemaContent(t)})),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null},e}(),S=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e}();t.UnresolvedSchema=S;var b=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){return this.getSectionRecursive(e,this.schema)},e.prototype.getSectionRecursive=function(e,t){var n=this;if(!t||0===e.length)return t;var r=e.shift();if(t.properties&&t.properties[r])return this.getSectionRecursive(e,t.properties[r]);if(c.isObject(t.patternProperties))Object.keys(t.patternProperties).forEach(function(o){var i=new RegExp(o);if(i.test(r))return n.getSectionRecursive(e,t.patternProperties[o])});else{if(c.isObject(t.additionalProperties))return this.getSectionRecursive(e,t.additionalProperties);if(r.match("[0-9]+")){if(c.isObject(t.items))return this.getSectionRecursive(e,t.items);if(Array.isArray(t.items))try{var o=parseInt(r,10);return t.items[o]?this.getSectionRecursive(e,t.items[o]):null}catch(i){return null}}}return null},e}();t.ResolvedSchema=b;var O=function(){function e(e,t,n){var r=this;this.requestService=e,this.contextService=t,this.callOnDispose=[],n&&this.callOnDispose.push(n.addListener2_(h.ResourceEvents.CHANGED,function(e){return r.onResourceChange(e)})),this.contributionSchemas={},this.contributionAssociations={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={}}return e.prototype.dispose=function(){this.callOnDispose=d.dispose(this.callOnDispose)},e.prototype.onResourceChange=function(e){var t=e.url.toString(),n=this.schemasById[t];n&&n.clearSchema()},e.prototype.normalizeId=function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var n in t)n=this.normalizeId(n),this.contributionSchemas[n]=this.addSchemaHandle(n,t[n])}},e.prototype.addSchemaHandle=function(e,t){var n=new y(this,e,t);return this.schemasById[e]=n,n},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.getOrAddFilePatternAssociation=function(e){var t=this.filePatternAssociationById[e];return t||(t=new v(e),this.filePatternAssociationById[e]=t,this.filePatternAssociations.push(t)),t},e.prototype.registerExternalSchema=function(e,t,n){var r=this;void 0===t&&(t=null);var o=this.normalizeId(e);return t&&t.forEach(function(t){r.getOrAddFilePatternAssociation(t).addSchema(e)}),n?this.addSchemaHandle(o,n):this.getOrAddSchemaHandle(o)},e.prototype.clearExternalSchemas=function(){var e=this;this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={};for(var t in this.contributionSchemas)this.schemasById[t]=this.contributionSchemas[t];for(var n in this.contributionAssociations){var r=this.getOrAddFilePatternAssociation(n);this.contributionAssociations[n].forEach(function(t){var n=e.normalizeId(t);r.addSchema(n)})}},e.prototype.getResolvedSchema=function(e){var t=this.normalizeId(e),n=this.schemasById[t];return n?n.getResolvedSchema():p.TPromise.as(null)},e.prototype.loadSchema=function(e){return this.requestService.makeRequest({url:e}).then(function(t){var r=t.responseText;if(!r){var o=n.localize(0,null,g(e));return new S({},[o])}var i={},s=[];i=a.parse(r,s);var l=s.length?[n.localize(1,null,g(e),a.getParseErrorMessage(s[0].error))]:[];return new S(i,l)},function(t){var r=n.localize(2,null,g(e),t.responseText||s.getErrorStatusDescription(t.status)||t.toString());return new S({},[r])})},e.prototype.resolveSchemaContent=function(e){var t=this,r=e.errors.slice(0),o=e.schema,a=function(e,t){if(!t)return e;var n=e;return t.substr(1).split("/").some(function(e){return n=n[e],!n}),n},s=function(e,t,o){var s=a(t,o);"object"==typeof s?i.mixin(e,s,!1):r.push(n.localize(3,null,o,t.id)),delete e.$ref},l=function(e,o,i){return t.getOrAddSchemaHandle(o).getUnresolvedSchema().then(function(t){if(t.errors.length){var a=i?o+"#"+i:o;r.push(n.localize(4,null,a,t.errors[0]))}return s(e,t.schema,i),u(e,t.schema)})},u=function(e,t){for(var n=[e],r=[],o=[],i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var r=0,o=e;r<o.length;r++){var i=o[r];"object"==typeof i&&n.push(i)}},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var r=0,o=e;r<o.length;r++){var i=o[r];if("object"==typeof i)for(var a in i){var s=i[a];n.push(s)}}},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var r=0,o=e;r<o.length;r++){var i=o[r];Array.isArray(i)&&n.push.apply(n,i)}};n.length;){var c=n.pop();if(!(r.indexOf(c)>=0)){if(r.push(c),c.$ref){var h=c.$ref.split("#",2);if(h[0].length>0){o.push(l(c,h[0],h[1]));continue}s(c,t,h[1])}i(c.items,c.additionalProperties,c.not),a(c.definitions,c.properties,c.patternProperties,c.dependencies),u(c.anyOf,c.allOf,c.oneOf,c.items)}}return p.Promise.join(o)};return u(o,o).then(function(e){return new b(o,r)})},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter(function(e){return"$schema"===e.key.value&&!!e.value});if(n.length>0){var r=n[0].value.getValue();if(!l.startsWith(r,"http://")&&!l.startsWith(r,"https://")&&!l.startsWith(r,"file://")){var o=this.contextService.toResource(r);o&&(r=o.toString())}if(r){var i=this.normalizeId(r);return this.getOrAddSchemaHandle(i).getResolvedSchema()}}}for(var a=this.filePatternAssociations.length-1;a>=0;a--){var s=this.filePatternAssociations[a];if(s.matchesPattern(e))return s.getCombinedSchema(this).getResolvedSchema()}return p.TPromise.as(null)},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var n={allOf:t.map(function(e){return{$ref:e}})};return this.addSchemaHandle(e,n)},e=r([o(0,f.IRequestService),o(1,m.IWorkspaceContextService),o(2,h.IResourceService)],e)}();t.JSONSchemaService=O}),define(e[34],t([1,0,30,36,8,20,28,21,9,4,27,26,24,11,23,37,5,19,29,38,39,40]),function(e,t,n,i,a,s,l,u,c,p,h,f,m,d,g,v,y,S,b,O,k,x){"use strict";function w(e){switch(e){case"object":return i.SymbolKind.Module;case"string":return i.SymbolKind.String;case"number":return i.SymbolKind.Number;case"array":return i.SymbolKind.Array;case"boolean":return i.SymbolKind.Boolean;default:return i.SymbolKind.Variable}}var j=function(){function e(e,t,n,r,o,i){var a=this;this._modeId=e,this.resourceService=t,this.markerService=n,this._validationHelper=new x.ValidationHelper(this.resourceService,this._modeId,function(e){return a.doValidate(e)}),this.requestService=r,this.contextService=o,this.schemaService=i.createInstance(l.JSONSchemaService),this.contributions=[i.createInstance(h.ProjectJSONContribution),i.createInstance(f.PackageJSONContribution),i.createInstance(m.BowerJSONContribution),i.createInstance(d.GlobPatternContribution)],this.jsonIntellisense=new u.JSONIntellisense(this.schemaService,this.requestService,this.contributions)}return e.prototype.navigateValueSet=function(e,t,n){var r=this,o=this.resourceService.get(e),i=o.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn}),s=new a.JSONParser,l=new a.JSONDocumentConfig;l.ignoreDanglingComma=!0;var u=s.parse(o.getValue(),l),c=u.getNodeFromOffsetEndInclusive(i);return!c||"string"!==c.type&&"number"!==c.type&&"boolean"!==c.type&&"null"!==c.type?null:this.schemaService.getSchemaForResource(e.toString(),u).then(function(t){if(t){var i=[],a={},s={add:function(e){a[e.label]||(a[e.label]=!0,i.push(e))},setAsIncomplete:function(){},error:function(e){g.onUnexpectedError(e)}};r.jsonIntellisense.getValueSuggestions(e,t,u,c.parent,c.start,s);for(var l=o.getRangeFromOffsetAndLength(c.start,c.end-c.start),h=o.getValueInRange(l),f=0,m=i.length;f<m;f++)if(p.equalsIgnoreCase(i[f].label,h)){var d=f;return n?d=(f+1)%m:(d=f-1,d<0&&(d=m-1)),{value:i[d].label,range:l}}return null}})},e.prototype._doConfigure=function(e){var t=this;return e&&e.schemas&&(this.schemaService.clearExternalSchemas(),e.schemas.forEach(function(e){if(e.url&&(e.fileMatch||e.schema)){var n=e.url;if(!p.startsWith(n,"http://")&&!p.startsWith(n,"https://")&&!p.startsWith(n,"file://")){var r=t.contextService.toResource(n);r&&(n=r.toString())}n&&t.schemaService.registerExternalSchema(n,e.fileMatch,e.schema)}else if(e.filePattern&&e.schemaPath){var n=t.contextService.toResource(e.schemaPath).toString(),o=e.filePattern?[e.filePattern]:[];t.schemaService.registerExternalSchema(n,o)}})),this._validationHelper.triggerDueToConfigurationChange(),c.TPromise.as(void 0)},e.prototype.setSchemaContributions=function(e){return this.schemaService.setSchemaContributions(e),c.TPromise.as(!0)},e.prototype.enableValidator=function(){return this._validationHelper.enable(),c.TPromise.as(null)},e.prototype.doValidate=function(e){for(var t=0;t<e.length;t++)this.doValidate1(e[t])},e.prototype.doValidate1=function(e){var t=this,r=this.resourceService.get(e),o=new a.JSONParser,i=r.getValue();if(0!==i.length){var s=o.parse(i);this.schemaService.getSchemaForResource(e.toString(),s).then(function(o){if(o)if(o.errors.length&&s.root){var i="object"===s.root.type?s.root.getFirstProperty("$schema"):null;if(i){var a=i.value||i;s.warnings.push({location:{start:a.start,end:a.end},message:o.errors[0]})}else s.warnings.push({location:{start:s.root.start,end:s.root.start+1},message:o.errors[0]})}else s.validate(o.schema);var l={},u=[];s.errors.concat(s.warnings).forEach(function(e,t){var o=e.location.start+" "+e.location.end+" "+e.message;if(!l[o]){l[o]=!0;var i=r.getPositionFromOffset(e.location.start),a=r.getPositionFromOffset(e.location.end);u.push({message:e.message,severity:t>=s.errors.length?n["default"].Warning:n["default"].Error,startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:a.lineNumber,endColumn:a.column})}}),t.markerService.changeOne(t._modeId,e,u)})}},e.prototype.provideCompletionItems=function(e,t){return this.doSuggest(e,t).then(function(e){return k.filterSuggestions(e)})},e.prototype.doSuggest=function(e,t){var n=this.resourceService.get(e);return this.jsonIntellisense.doSuggest(e,n,t)},e.prototype.provideHover=function(e,t){var n=this,r=this.resourceService.get(e),o=new a.JSONParser,i=o.parse(r.getValue()),s=r.getOffsetFromPosition(t),l=i.getNodeFromOffset(s),u=l;if(l&&"string"===l.type){var p=l;if(p.isKey){var h=l.parent;l=h.value}}return l?this.schemaService.getSchemaForResource(e.toString(),i).then(function(t){if(t){var o=[];i.validate(t.schema,o,l.start);var a=null,s=null;o.every(function(e){return e.node===l&&!e.inverted&&e.schema&&(a=a||e.schema.description,s=s||e.schema.id),!0});for(var c=l.getNodeLocation(),p=n.contributions.length-1;p>=0;p--){var h=n.contributions[p],f=h.getInfoContribution(e,c);if(f)return f.then(function(e){return n.createInfoResult(e,u,r)})}if(a){var m=[a];return n.createInfoResult(m,u,r)}}return null}):c.TPromise.as(null)},e.prototype.createInfoResult=function(e,t,n){var r=n.getRangeFromOffsetAndLength(t.start,t.end-t.start),o={contents:e,range:r};return o},e.prototype.provideDocumentSymbols=function(e){function t(r,o,i){if("array"===o.type)o.items.forEach(function(e){t(r,e,i)});else if("object"===o.type){var a=o;a.properties.forEach(function(o){var a=n.getRangeFromOffsetAndLength(o.start,o.end-o.start),s=o.value;if(s){var l=i?i+"."+o.key.name:o.key.name;r.push({name:o.key.getValue(),kind:w(s.type),location:{uri:e,range:a},containerName:i}),t(r,s,l)}})}return r}var n=this.resourceService.get(e),r=new a.JSONParser,o=r.parse(n.getValue()),s=o.root;if(!s)return c.TPromise.as(null);var l=e.toString();if(("vscode://defaultsettings/keybindings.json"===l||p.endsWith(l.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){var u=[];return s.items.forEach(function(t){if("object"===t.type){var r=t.getFirstProperty("key");if(r&&r.value){var o=n.getRangeFromOffsetAndLength(t.start,t.end-t.start);u.push({name:r.value.getValue(),kind:i.SymbolKind.String,location:{uri:e,range:o}})}}}),c.TPromise.as(u)}var u=t([],s,void 0);return c.TPromise.as(u)},e.prototype.format=function(e,t,n){var r=this.resourceService.get(e),o=t?r.getOffsetAndLengthFromRange(t):void 0,i=s.format(r.getValue(),o,{insertSpaces:n.insertSpaces,tabSize:n.tabSize,eol:r.getEOL()}),a=i.map(function(e){return{range:r.getRangeFromOffsetAndLength(e.offset,e.length),text:e.content}});return c.TPromise.as(a)},e=r([o(1,b.IResourceService),o(2,v.IMarkerService),o(3,y.IRequestService),o(4,S.IWorkspaceContextService),o(5,O.IInstantiationService)],e)}();t.JSONWorker=j})}).call(this);
//# sourceMappingURL=../../../../../min-maps/vs/languages/json/common/jsonWorker.js.map